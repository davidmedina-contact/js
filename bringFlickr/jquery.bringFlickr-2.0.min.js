(function(a){a.fn.bringFlickr=function(o){if(this.length>1){this.each(function(){a(this).bringFlickr(o);});return this;}var m=this,k,l,f,b,j,g,h,n,d={amount:5,onComplete:null,rss:"http://api.flickr.com/services/feeds/photos_public.gne?tags=art&lang=en-us&format=rss_200",size:"medium"};o=a.extend({},d,o);this.jsonReady=false;function i(){var p=this.seed/this.Q,q=this.seed%this.Q,r=this.A*q-this.R*p;if(r>0){this.seed=r;}else{this.seed=r+this.M;}return(this.seed*this.oneOverM);}function e(){var p=new Date();this.seed=2345678901+(p.getSeconds()*16777215)+(p.getMinutes()*65535);this.A=48271;this.M=2147483647;this.Q=this.M/this.A;this.R=this.M%this.A;this.oneOverM=1/this.M;this.next=i;return this;}function c(p,r){var q=new e();return Math.round((r-p)*q.next()+p);}this.changeOptions=function(p){var q;for(q in p){if(p.hasOwnProperty(q)){switch(q){case"size":o.size=p[q];break;case"amount":o.amount=p[q];break;case"rss":o.rss=p[q];break;}}}m.initialize();};this.initialize=function(){var q=[],p;k="http://pipes.yahoo.com/pipes/pipe.run?_id=9abb5269564e4b17fdb03660bfcf1371&_render=json&ammount="+o.amount+"&feed="+encodeURIComponent((o.rss).replace("&#64;","%40"))+"&size="+o.size+"&_callback=?";l=a(m).find("li");f=l.find("img");b=l.find("a.thumb");j=l.find("a.title");a(m).find("li:last").addClass("last-child");a.getJSON(k,function(r){a.each(r.value.items,function(s,t){h=(t.description).indexOf('src="');n=(t.description).indexOf(".jpg");g=(t.description).slice(h+5,n+4);q[s]=g;if(l.length!==1){p=document.createElement("IMG");p.src=g;a(p).attr("alt","Flickr Image").replaceAll(f.eq(s));b.eq(s).attr("title",t.title);if(t.content){h=(t.content.content).indexOf('src="');n=(t.content.content).indexOf(".jpg");g=(t.content.content).slice(h+5,n-2)+".jpg";b.eq(s).attr("href",g);}if(t.title.indexOf("|")!==-1){j.eq(s).text(t.title.split("|")[0]);}else{j.eq(s).text(t.title);}j.eq(s).attr("title",t.title);j.eq(s).attr("href",t.link);}});if(l.length===1){g=q[c(0,q.length-1)];p=document.createElement("IMG");p.src=g;a(p).attr("alt","Flickr Image").replaceAll(f);}if(typeof o.onComplete==="function"){o.onComplete(m);}});};m.initialize();return this;};})(jQuery);